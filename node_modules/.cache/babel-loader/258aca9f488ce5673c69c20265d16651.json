{"ast":null,"code":"var _jsxFileName = \"/home/dmitriy/WebstormProjects/react-mesto-auth/src/components/Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from \"react\";\nimport { Input } from \"./Input\";\nimport { SignButton } from \"./SignButton\";\nimport * as authApi from '../utils/authApi';\nimport { useHistory } from \"react-router-dom\";\nimport { AuthContext } from \"../contexts/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Login = _ref => {\n  _s();\n\n  let {\n    onErrorLoggedIn\n  } = _ref;\n  const authContext = useContext(AuthContext);\n  const [formState, setFormState] = useState({\n    email: '',\n    password: ''\n  });\n  const history = useHistory();\n\n  const handleChange = evt => {\n    const {\n      value,\n      name\n    } = evt.target;\n    setFormState({ ...formState,\n      [name]: value\n    });\n  };\n\n  const handleSubmit = evt => {\n    evt.preventDefault();\n    authApi.login(formState).then(data => {\n      if (data.token) {\n        authContext.handleLogin();\n        history.push('/');\n        authApi.getUserCredentials(data.token).then(_ref2 => {\n          let {\n            email,\n            _id\n          } = _ref2;\n        });\n      }\n    }).catch(() => {\n      onErrorLoggedIn();\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"content\",\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"login page__login\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"login__title\",\n        children: \"\\u0412\\u0445\\u043E\\u0434\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"login__form\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          value: formState['email'],\n          id: \"login-email\",\n          name: \"email\",\n          maxLength: \"24\",\n          minLength: \"6\",\n          onChangeHandler: handleChange,\n          type: \"text\",\n          styleModifier: \"login__input\",\n          placeholder: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          value: formState['password'],\n          id: \"login-password\",\n          name: \"password\",\n          maxLength: \"24\",\n          minLength: \"6\",\n          onChangeHandler: handleChange,\n          type: \"password\",\n          styleModifier: \"login__input\",\n          placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(SignButton, {\n          value: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"eeDYJT/nPCT2yNeKlMKGuFGrAJ0=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/dmitriy/WebstormProjects/react-mesto-auth/src/components/Login.jsx"],"names":["React","useContext","useState","Input","SignButton","authApi","useHistory","AuthContext","Login","onErrorLoggedIn","authContext","formState","setFormState","email","password","history","handleChange","evt","value","name","target","handleSubmit","preventDefault","login","then","data","token","handleLogin","push","getUserCredentials","_id","catch"],"mappings":"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","sourcesContent":["import React, {useContext, useState} from \"react\";\nimport {Input} from \"./Input\";\nimport {SignButton} from \"./SignButton\";\nimport * as authApi from '../utils/authApi';\nimport {useHistory} from \"react-router-dom\";\nimport {AuthContext} from \"../contexts/AuthContext\";\nexport const Login = ({ onErrorLoggedIn }) => {\n\n    const authContext = useContext(AuthContext);\n    const [formState, setFormState] = useState({email: '', password: ''});\n    const history = useHistory();\n\n    const handleChange = (evt) => {\n        const {value, name} = evt.target;\n        setFormState({...formState, [name]: value});\n    }\n    const handleSubmit = (evt) => {\n        evt.preventDefault();\n        authApi.login(formState).then(data => {\n            if(data.token){\n                authContext.handleLogin();\n                history.push('/');\n                authApi.getUserCredentials(data.token).then( ({email, _id}) => {\n\n                })\n            }\n        }).catch(() => {\n            onErrorLoggedIn();\n        })\n    }\n    return(\n        <main className=\"content\">\n            <section className=\"login page__login\">\n                <h2 className=\"login__title\">Вход</h2>\n                <form className=\"login__form\" onSubmit={handleSubmit}>\n                    <Input value={formState['email']}\n                           id=\"login-email\"\n                           name=\"email\"\n                           maxLength=\"24\"\n                           minLength=\"6\"\n                           onChangeHandler={handleChange}\n                           type=\"text\"\n                           styleModifier=\"login__input\"\n                           placeholder=\"Email\"\n                    />\n                    <Input value={formState['password']}\n                           id=\"login-password\"\n                           name=\"password\"\n                           maxLength=\"24\"\n                           minLength=\"6\"\n                           onChangeHandler={handleChange}\n                           type=\"password\"\n                           styleModifier=\"login__input\"\n                           placeholder=\"Пароль\"\n                    />\n                    <SignButton value=\"Войти\" />\n                </form>\n            </section>\n        </main>\n    );\n}"]},"metadata":{},"sourceType":"module"}